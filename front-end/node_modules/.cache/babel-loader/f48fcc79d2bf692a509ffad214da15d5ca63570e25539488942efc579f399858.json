{"ast":null,"code":"var _jsxFileName = \"D:\\\\downloads\\\\Git\\\\BookManagement\\\\front-end\\\\src\\\\components\\\\users\\\\UserForm.js\",\n  _s = $RefreshSig$();\n// src/components/users/UserForm.js\nimport React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Container, Row, Col, Form, Button, Card, Alert, Spinner, Tab, Nav, Table, Badge } from \"react-bootstrap\";\nimport { FaSave, FaTimes, FaUser, FaEnvelope, FaLock, FaUserTag, FaBook, FaCalendarAlt, FaInfoCircle } from \"react-icons/fa\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UserForm = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const isEditMode = !!id;\n  const [formData, setFormData] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    role: \"user\"\n  });\n  const [userLoans, setUserLoans] = useState([]);\n  const [loadingLoans, setLoadingLoans] = useState(false);\n  const [loanError, setLoanError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const [validated, setValidated] = useState(false);\n  const [activeTab, setActiveTab] = useState(\"info\");\n  useEffect(() => {\n    const fetchUser = async () => {\n      if (!isEditMode) return;\n      setLoading(true);\n      try {\n        const res = await axios.get(`http://localhost:9999/users/${id}`);\n        const userData = res.data;\n        setFormData({\n          username: userData.username,\n          email: userData.email,\n          password: \"\",\n          confirmPassword: \"\",\n          role: userData.role\n        });\n      } catch (err) {\n        setError(\"Không thể tải thông tin người dùng. Vui lòng thử lại.\");\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchUser();\n  }, [id, isEditMode]);\n\n  // Tải danh sách sách mượn khi người dùng chuyển sang tab \"Sách đã mượn\"\n  useEffect(() => {\n    const fetchUserLoans = async () => {\n      if (!isEditMode || activeTab !== \"loans\") return;\n      setLoadingLoans(true);\n      setLoanError(\"\");\n      try {\n        const res = await axios.get(`http://localhost:9999/users/${id}/loans`);\n        setUserLoans(res.data);\n      } catch (err) {\n        setLoanError(\"Không thể tải danh sách sách đã mượn. Vui lòng thử lại.\");\n        console.error(err);\n      } finally {\n        setLoadingLoans(false);\n      }\n    };\n    fetchUserLoans();\n  }, [id, isEditMode, activeTab]);\n  const {\n    username,\n    email,\n    password,\n    confirmPassword,\n    role\n  } = formData;\n  const onChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const onSubmit = async e => {\n    e.preventDefault();\n    const form = e.currentTarget;\n    setValidated(true);\n    if (form.checkValidity() === false) {\n      e.stopPropagation();\n      return;\n    }\n\n    // Validation\n    if (password !== confirmPassword) {\n      setError(\"Mật khẩu xác nhận không khớp\");\n      return;\n    }\n    if (!isEditMode && password.length < 6) {\n      setError(\"Mật khẩu phải có ít nhất 6 ký tự\");\n      return;\n    }\n    setError(\"\");\n    setSuccess(\"\");\n    setSubmitting(true);\n    try {\n      // Chuẩn bị dữ liệu gửi đi\n      const userData = {\n        username,\n        email,\n        role\n      };\n\n      // Chỉ gửi password nếu đã nhập hoặc đang tạo mới\n      if (password || !isEditMode) {\n        userData.password = password;\n      }\n      let res;\n      if (isEditMode) {\n        res = await axios.put(`http://localhost:9999/users/${id}`, userData);\n        setSuccess(\"Cập nhật người dùng thành công!\");\n      } else {\n        res = await axios.post(\"http://localhost:9999/users/register\", userData);\n        setSuccess(\"Tạo người dùng thành công!\");\n      }\n\n      // Chuyển hướng sau 1.5 giây\n      setTimeout(() => {\n        navigate(\"/users\");\n      }, 1500);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || (isEditMode ? \"Lỗi cập nhật người dùng\" : \"Lỗi tạo người dùng\"));\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  const formatDate = dateString => {\n    if (!dateString) return \"N/A\";\n    const options = {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\"\n    };\n    return new Date(dateString).toLocaleDateString(\"vi-VN\", options);\n  };\n  const getLoanStatus = loan => {\n    if (loan.status === \"returned\") {\n      return /*#__PURE__*/_jsxDEV(Badge, {\n        bg: \"success\",\n        children: \"\\u0110\\xE3 tr\\u1EA3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 14\n      }, this);\n    } else if (loan.isOverdue) {\n      return /*#__PURE__*/_jsxDEV(Badge, {\n        bg: \"danger\",\n        children: \"Qu\\xE1 h\\u1EA1n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Badge, {\n        bg: \"primary\",\n        children: \"\\u0110ang m\\u01B0\\u1EE3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 14\n      }, this);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"py-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"border\",\n          variant: \"primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"py-4\",\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: 10,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            className: \"bg-primary text-white\",\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"mb-0\",\n              children: isEditMode ? \"Quản lý người dùng: \" + username : \"Thêm người dùng mới\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: isEditMode ? /*#__PURE__*/_jsxDEV(Tab.Container, {\n              id: \"user-tabs\",\n              activeKey: activeTab,\n              onSelect: k => setActiveTab(k),\n              children: [/*#__PURE__*/_jsxDEV(Nav, {\n                variant: \"tabs\",\n                className: \"mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(Nav.Item, {\n                  children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n                    eventKey: \"info\",\n                    children: [/*#__PURE__*/_jsxDEV(FaUser, {\n                      className: \"me-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 223,\n                      columnNumber: 25\n                    }, this), \"Th\\xF4ng tin ng\\u01B0\\u1EDDi d\\xF9ng\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Nav.Item, {\n                  children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n                    eventKey: \"loans\",\n                    children: [/*#__PURE__*/_jsxDEV(FaBook, {\n                      className: \"me-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 229,\n                      columnNumber: 25\n                    }, this), \"S\\xE1ch \\u0111\\xE3 m\\u01B0\\u1EE3n\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 228,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Tab.Content, {\n                children: [/*#__PURE__*/_jsxDEV(Tab.Pane, {\n                  eventKey: \"info\",\n                  children: renderUserForm()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tab.Pane, {\n                  eventKey: \"loans\",\n                  children: renderUserLoans()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this) : renderUserForm()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 5\n  }, this);\n  function renderUserForm() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        className: \"mb-4\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"success\",\n        className: \"mb-4\",\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        noValidate: true,\n        validated: validated,\n        onSubmit: onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Row,\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            column: true,\n            sm: 3,\n            className: \"text-sm-end\",\n            children: [/*#__PURE__*/_jsxDEV(FaUser, {\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this), \"T\\xEAn ng\\u01B0\\u1EDDi d\\xF9ng\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: 9,\n            children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              name: \"username\",\n              value: username,\n              onChange: onChange,\n              required: true,\n              placeholder: \"Nh\\u1EADp t\\xEAn ng\\u01B0\\u1EDDi d\\xF9ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n              type: \"invalid\",\n              children: \"Vui l\\xF2ng nh\\u1EADp t\\xEAn ng\\u01B0\\u1EDDi d\\xF9ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Row,\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            column: true,\n            sm: 3,\n            className: \"text-sm-end\",\n            children: [/*#__PURE__*/_jsxDEV(FaEnvelope, {\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this), \"Email\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: 9,\n            children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"email\",\n              name: \"email\",\n              value: email,\n              onChange: onChange,\n              required: true,\n              placeholder: \"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9 email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n              type: \"invalid\",\n              children: \"Vui l\\xF2ng nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9 email h\\u1EE3p l\\u1EC7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Row,\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            column: true,\n            sm: 3,\n            className: \"text-sm-end\",\n            children: [/*#__PURE__*/_jsxDEV(FaLock, {\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this), \"M\\u1EADt kh\\u1EA9u\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: 9,\n            children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"password\",\n              name: \"password\",\n              value: password,\n              onChange: onChange,\n              required: !isEditMode,\n              placeholder: isEditMode ? \"Nhập mật khẩu mới hoặc để trống\" : \"Nhập mật khẩu\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n              className: \"text-muted\",\n              children: isEditMode ? \"Để trống nếu không muốn thay đổi mật khẩu\" : \"Mật khẩu phải có ít nhất 6 ký tự\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Row,\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            column: true,\n            sm: 3,\n            className: \"text-sm-end\",\n            children: [/*#__PURE__*/_jsxDEV(FaLock, {\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 15\n            }, this), \"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: 9,\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"password\",\n              name: \"confirmPassword\",\n              value: confirmPassword,\n              onChange: onChange,\n              required: !isEditMode || password !== \"\",\n              placeholder: \"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Row,\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            column: true,\n            sm: 3,\n            className: \"text-sm-end\",\n            children: [/*#__PURE__*/_jsxDEV(FaUserTag, {\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 15\n            }, this), \"Vai tr\\xF2\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: 9,\n            children: /*#__PURE__*/_jsxDEV(Form.Select, {\n              name: \"role\",\n              value: role,\n              onChange: onChange,\n              required: true,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"user\",\n                children: \"Ng\\u01B0\\u1EDDi d\\xF9ng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"admin\",\n                children: \"Admin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-end\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secondary\",\n            className: \"me-2\",\n            onClick: () => navigate(\"/users\"),\n            children: [/*#__PURE__*/_jsxDEV(FaTimes, {\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 15\n            }, this), \" H\\u1EE7y\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"primary\",\n            disabled: submitting,\n            children: [/*#__PURE__*/_jsxDEV(FaSave, {\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 15\n            }, this), submitting ? isEditMode ? \"Đang cập nhật...\" : \"Đang tạo...\" : isEditMode ? \"Cập nhật\" : \"Tạo người dùng\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n  function renderUserLoans() {\n    if (loadingLoans) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-4\",\n        children: /*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"border\",\n          variant: \"primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }, this);\n    }\n    if (loanError) {\n      return /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        children: loanError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 14\n      }, this);\n    }\n    if (userLoans.length === 0) {\n      return /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"info\",\n        children: [/*#__PURE__*/_jsxDEV(FaInfoCircle, {\n          className: \"me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this), \"Ng\\u01B0\\u1EDDi d\\xF9ng n\\xE0y ch\\u01B0a m\\u01B0\\u1EE3n s\\xE1ch n\\xE0o.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"mb-3\",\n        children: \"Danh s\\xE1ch s\\xE1ch \\u0111\\xE3 m\\u01B0\\u1EE3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-responsive\",\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"S\\xE1ch\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 419,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Ng\\xE0y m\\u01B0\\u1EE3n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"H\\u1EA1n tr\\u1EA3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Tr\\u1EA1ng th\\xE1i\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: userLoans.map(loan => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"fw-bold mb-1\",\n                    children: loan.book.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-muted mb-0 small\",\n                    children: loan.book.author ? loan.book.author.name : \"Chưa có tác giả\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 431,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(FaCalendarAlt, {\n                  className: \"text-muted me-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 21\n                }, this), formatDate(loan.loanDate)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: loan.dueDate ? formatDate(loan.dueDate) : \"N/A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 442,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"text-center\",\n                children: getLoanStatus(loan)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 19\n              }, this)]\n            }, loan.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n};\n_s(UserForm, \"CWontgEjycF58/l9SqQGB3jc0Aw=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = UserForm;\nexport default UserForm;\nvar _c;\n$RefreshReg$(_c, \"UserForm\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","Container","Row","Col","Form","Button","Card","Alert","Spinner","Tab","Nav","Table","Badge","FaSave","FaTimes","FaUser","FaEnvelope","FaLock","FaUserTag","FaBook","FaCalendarAlt","FaInfoCircle","jsxDEV","_jsxDEV","Fragment","_Fragment","UserForm","_s","id","navigate","isEditMode","formData","setFormData","username","email","password","confirmPassword","role","userLoans","setUserLoans","loadingLoans","setLoadingLoans","loanError","setLoanError","loading","setLoading","submitting","setSubmitting","error","setError","success","setSuccess","validated","setValidated","activeTab","setActiveTab","fetchUser","res","get","userData","data","err","console","fetchUserLoans","onChange","e","target","name","value","onSubmit","preventDefault","form","currentTarget","checkValidity","stopPropagation","length","put","post","setTimeout","_err$response","_err$response$data","response","message","formatDate","dateString","options","year","month","day","Date","toLocaleDateString","getLoanStatus","loan","status","bg","children","fileName","_jsxFileName","lineNumber","columnNumber","isOverdue","className","animation","variant","md","Header","Body","activeKey","onSelect","k","Item","Link","eventKey","Content","Pane","renderUserForm","renderUserLoans","noValidate","Group","as","Label","column","sm","Control","type","required","placeholder","Feedback","Text","Select","onClick","disabled","striped","bordered","hover","map","book","title","author","loanDate","dueDate","_c","$RefreshReg$"],"sources":["D:/downloads/Git/BookManagement/front-end/src/components/users/UserForm.js"],"sourcesContent":["// src/components/users/UserForm.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport {\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Form,\r\n  Button,\r\n  Card,\r\n  Alert,\r\n  Spinner,\r\n  Tab,\r\n  Nav,\r\n  Table,\r\n  Badge,\r\n} from \"react-bootstrap\";\r\nimport {\r\n  FaSave,\r\n  FaTimes,\r\n  FaUser,\r\n  FaEnvelope,\r\n  FaLock,\r\n  FaUserTag,\r\n  FaBook,\r\n  FaCalendarAlt,\r\n  FaInfoCircle,\r\n} from \"react-icons/fa\";\r\n\r\nconst UserForm = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const isEditMode = !!id;\r\n\r\n  const [formData, setFormData] = useState({\r\n    username: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    confirmPassword: \"\",\r\n    role: \"user\",\r\n  });\r\n\r\n  const [userLoans, setUserLoans] = useState([]);\r\n  const [loadingLoans, setLoadingLoans] = useState(false);\r\n  const [loanError, setLoanError] = useState(\"\");\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n  const [validated, setValidated] = useState(false);\r\n  const [activeTab, setActiveTab] = useState(\"info\");\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      if (!isEditMode) return;\r\n\r\n      setLoading(true);\r\n      try {\r\n        const res = await axios.get(`http://localhost:9999/users/${id}`);\r\n        const userData = res.data;\r\n\r\n        setFormData({\r\n          username: userData.username,\r\n          email: userData.email,\r\n          password: \"\",\r\n          confirmPassword: \"\",\r\n          role: userData.role,\r\n        });\r\n      } catch (err) {\r\n        setError(\"Không thể tải thông tin người dùng. Vui lòng thử lại.\");\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchUser();\r\n  }, [id, isEditMode]);\r\n\r\n  // Tải danh sách sách mượn khi người dùng chuyển sang tab \"Sách đã mượn\"\r\n  useEffect(() => {\r\n    const fetchUserLoans = async () => {\r\n      if (!isEditMode || activeTab !== \"loans\") return;\r\n\r\n      setLoadingLoans(true);\r\n      setLoanError(\"\");\r\n\r\n      try {\r\n        const res = await axios.get(`http://localhost:9999/users/${id}/loans`);\r\n        setUserLoans(res.data);\r\n      } catch (err) {\r\n        setLoanError(\"Không thể tải danh sách sách đã mượn. Vui lòng thử lại.\");\r\n        console.error(err);\r\n      } finally {\r\n        setLoadingLoans(false);\r\n      }\r\n    };\r\n\r\n    fetchUserLoans();\r\n  }, [id, isEditMode, activeTab]);\r\n\r\n  const { username, email, password, confirmPassword, role } = formData;\r\n\r\n  const onChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const form = e.currentTarget;\r\n\r\n    setValidated(true);\r\n\r\n    if (form.checkValidity() === false) {\r\n      e.stopPropagation();\r\n      return;\r\n    }\r\n\r\n    // Validation\r\n    if (password !== confirmPassword) {\r\n      setError(\"Mật khẩu xác nhận không khớp\");\r\n      return;\r\n    }\r\n\r\n    if (!isEditMode && password.length < 6) {\r\n      setError(\"Mật khẩu phải có ít nhất 6 ký tự\");\r\n      return;\r\n    }\r\n\r\n    setError(\"\");\r\n    setSuccess(\"\");\r\n    setSubmitting(true);\r\n\r\n    try {\r\n      // Chuẩn bị dữ liệu gửi đi\r\n      const userData = {\r\n        username,\r\n        email,\r\n        role,\r\n      };\r\n\r\n      // Chỉ gửi password nếu đã nhập hoặc đang tạo mới\r\n      if (password || !isEditMode) {\r\n        userData.password = password;\r\n      }\r\n\r\n      let res;\r\n      if (isEditMode) {\r\n        res = await axios.put(`http://localhost:9999/users/${id}`, userData);\r\n        setSuccess(\"Cập nhật người dùng thành công!\");\r\n      } else {\r\n        res = await axios.post(\r\n          \"http://localhost:9999/users/register\",\r\n          userData\r\n        );\r\n        setSuccess(\"Tạo người dùng thành công!\");\r\n      }\r\n\r\n      // Chuyển hướng sau 1.5 giây\r\n      setTimeout(() => {\r\n        navigate(\"/users\");\r\n      }, 1500);\r\n    } catch (err) {\r\n      setError(\r\n        err.response?.data?.message ||\r\n          (isEditMode ? \"Lỗi cập nhật người dùng\" : \"Lỗi tạo người dùng\")\r\n      );\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"N/A\";\r\n    const options = { year: \"numeric\", month: \"long\", day: \"numeric\" };\r\n    return new Date(dateString).toLocaleDateString(\"vi-VN\", options);\r\n  };\r\n\r\n  const getLoanStatus = (loan) => {\r\n    if (loan.status === \"returned\") {\r\n      return <Badge bg=\"success\">Đã trả</Badge>;\r\n    } else if (loan.isOverdue) {\r\n      return <Badge bg=\"danger\">Quá hạn</Badge>;\r\n    } else {\r\n      return <Badge bg=\"primary\">Đang mượn</Badge>;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container className=\"py-4\">\r\n        <div className=\"d-flex justify-content-center\">\r\n          <Spinner animation=\"border\" variant=\"primary\" />\r\n        </div>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container className=\"py-4\">\r\n      <Row className=\"justify-content-center\">\r\n        <Col md={10}>\r\n          <Card className=\"shadow-sm\">\r\n            <Card.Header className=\"bg-primary text-white\">\r\n              <h5 className=\"mb-0\">\r\n                {isEditMode\r\n                  ? \"Quản lý người dùng: \" + username\r\n                  : \"Thêm người dùng mới\"}\r\n              </h5>\r\n            </Card.Header>\r\n            <Card.Body>\r\n              {isEditMode ? (\r\n                <Tab.Container\r\n                  id=\"user-tabs\"\r\n                  activeKey={activeTab}\r\n                  onSelect={(k) => setActiveTab(k)}\r\n                >\r\n                  <Nav variant=\"tabs\" className=\"mb-4\">\r\n                    <Nav.Item>\r\n                      <Nav.Link eventKey=\"info\">\r\n                        <FaUser className=\"me-2\" />\r\n                        Thông tin người dùng\r\n                      </Nav.Link>\r\n                    </Nav.Item>\r\n                    <Nav.Item>\r\n                      <Nav.Link eventKey=\"loans\">\r\n                        <FaBook className=\"me-2\" />\r\n                        Sách đã mượn\r\n                      </Nav.Link>\r\n                    </Nav.Item>\r\n                  </Nav>\r\n                  <Tab.Content>\r\n                    <Tab.Pane eventKey=\"info\">{renderUserForm()}</Tab.Pane>\r\n                    <Tab.Pane eventKey=\"loans\">{renderUserLoans()}</Tab.Pane>\r\n                  </Tab.Content>\r\n                </Tab.Container>\r\n              ) : (\r\n                renderUserForm()\r\n              )}\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n\r\n  function renderUserForm() {\r\n    return (\r\n      <>\r\n        {error && (\r\n          <Alert variant=\"danger\" className=\"mb-4\">\r\n            {error}\r\n          </Alert>\r\n        )}\r\n\r\n        {success && (\r\n          <Alert variant=\"success\" className=\"mb-4\">\r\n            {success}\r\n          </Alert>\r\n        )}\r\n\r\n        <Form noValidate validated={validated} onSubmit={onSubmit}>\r\n          <Form.Group as={Row} className=\"mb-3\">\r\n            <Form.Label column sm={3} className=\"text-sm-end\">\r\n              <FaUser className=\"me-2\" />\r\n              Tên người dùng\r\n            </Form.Label>\r\n            <Col sm={9}>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"username\"\r\n                value={username}\r\n                onChange={onChange}\r\n                required\r\n                placeholder=\"Nhập tên người dùng\"\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">\r\n                Vui lòng nhập tên người dùng\r\n              </Form.Control.Feedback>\r\n            </Col>\r\n          </Form.Group>\r\n\r\n          <Form.Group as={Row} className=\"mb-3\">\r\n            <Form.Label column sm={3} className=\"text-sm-end\">\r\n              <FaEnvelope className=\"me-2\" />\r\n              Email\r\n            </Form.Label>\r\n            <Col sm={9}>\r\n              <Form.Control\r\n                type=\"email\"\r\n                name=\"email\"\r\n                value={email}\r\n                onChange={onChange}\r\n                required\r\n                placeholder=\"Nhập địa chỉ email\"\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">\r\n                Vui lòng nhập địa chỉ email hợp lệ\r\n              </Form.Control.Feedback>\r\n            </Col>\r\n          </Form.Group>\r\n\r\n          <Form.Group as={Row} className=\"mb-3\">\r\n            <Form.Label column sm={3} className=\"text-sm-end\">\r\n              <FaLock className=\"me-2\" />\r\n              Mật khẩu\r\n            </Form.Label>\r\n            <Col sm={9}>\r\n              <Form.Control\r\n                type=\"password\"\r\n                name=\"password\"\r\n                value={password}\r\n                onChange={onChange}\r\n                required={!isEditMode}\r\n                placeholder={\r\n                  isEditMode\r\n                    ? \"Nhập mật khẩu mới hoặc để trống\"\r\n                    : \"Nhập mật khẩu\"\r\n                }\r\n              />\r\n              <Form.Text className=\"text-muted\">\r\n                {isEditMode\r\n                  ? \"Để trống nếu không muốn thay đổi mật khẩu\"\r\n                  : \"Mật khẩu phải có ít nhất 6 ký tự\"}\r\n              </Form.Text>\r\n            </Col>\r\n          </Form.Group>\r\n\r\n          <Form.Group as={Row} className=\"mb-3\">\r\n            <Form.Label column sm={3} className=\"text-sm-end\">\r\n              <FaLock className=\"me-2\" />\r\n              Xác nhận mật khẩu\r\n            </Form.Label>\r\n            <Col sm={9}>\r\n              <Form.Control\r\n                type=\"password\"\r\n                name=\"confirmPassword\"\r\n                value={confirmPassword}\r\n                onChange={onChange}\r\n                required={!isEditMode || password !== \"\"}\r\n                placeholder=\"Xác nhận mật khẩu\"\r\n              />\r\n            </Col>\r\n          </Form.Group>\r\n\r\n          <Form.Group as={Row} className=\"mb-4\">\r\n            <Form.Label column sm={3} className=\"text-sm-end\">\r\n              <FaUserTag className=\"me-2\" />\r\n              Vai trò\r\n            </Form.Label>\r\n            <Col sm={9}>\r\n              <Form.Select\r\n                name=\"role\"\r\n                value={role}\r\n                onChange={onChange}\r\n                required\r\n              >\r\n                <option value=\"user\">Người dùng</option>\r\n                <option value=\"admin\">Admin</option>\r\n              </Form.Select>\r\n            </Col>\r\n          </Form.Group>\r\n\r\n          <div className=\"d-flex justify-content-end\">\r\n            <Button\r\n              variant=\"secondary\"\r\n              className=\"me-2\"\r\n              onClick={() => navigate(\"/users\")}\r\n            >\r\n              <FaTimes className=\"me-2\" /> Hủy\r\n            </Button>\r\n            <Button type=\"submit\" variant=\"primary\" disabled={submitting}>\r\n              <FaSave className=\"me-2\" />\r\n              {submitting\r\n                ? isEditMode\r\n                  ? \"Đang cập nhật...\"\r\n                  : \"Đang tạo...\"\r\n                : isEditMode\r\n                ? \"Cập nhật\"\r\n                : \"Tạo người dùng\"}\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </>\r\n    );\r\n  }\r\n\r\n  function renderUserLoans() {\r\n    if (loadingLoans) {\r\n      return (\r\n        <div className=\"text-center py-4\">\r\n          <Spinner animation=\"border\" variant=\"primary\" />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (loanError) {\r\n      return <Alert variant=\"danger\">{loanError}</Alert>;\r\n    }\r\n\r\n    if (userLoans.length === 0) {\r\n      return (\r\n        <Alert variant=\"info\">\r\n          <FaInfoCircle className=\"me-2\" />\r\n          Người dùng này chưa mượn sách nào.\r\n        </Alert>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <h5 className=\"mb-3\">Danh sách sách đã mượn</h5>\r\n        <div className=\"table-responsive\">\r\n          <Table striped bordered hover>\r\n            <thead>\r\n              <tr>\r\n                <th>Sách</th>\r\n                <th>Ngày mượn</th>\r\n                <th>Hạn trả</th>\r\n                <th>Trạng thái</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {userLoans.map((loan) => (\r\n                <tr key={loan.id}>\r\n                  <td>\r\n                    <div>\r\n                      <p className=\"fw-bold mb-1\">{loan.book.title}</p>\r\n                      <p className=\"text-muted mb-0 small\">\r\n                        {loan.book.author\r\n                          ? loan.book.author.name\r\n                          : \"Chưa có tác giả\"}\r\n                      </p>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <FaCalendarAlt className=\"text-muted me-2\" />\r\n                    {formatDate(loan.loanDate)}\r\n                  </td>\r\n                  <td>{loan.dueDate ? formatDate(loan.dueDate) : \"N/A\"}</td>\r\n\r\n                  <td className=\"text-center\">{getLoanStatus(loan)}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n};\r\n\r\nexport default UserForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}