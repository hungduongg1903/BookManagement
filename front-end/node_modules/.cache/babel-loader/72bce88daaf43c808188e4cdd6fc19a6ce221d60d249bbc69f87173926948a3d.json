{"ast":null,"code":"var _jsxFileName = \"D:\\\\downloads\\\\Git\\\\BookManagement\\\\front-end\\\\src\\\\components\\\\loans\\\\UserLoans.js\",\n  _s = $RefreshSig$();\n// src/components/loans/UserLoans.js\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { Link } from \"react-router-dom\";\nimport { Container, Row, Col, Table, Badge, Button, Spinner, Alert, Card } from \"react-bootstrap\";\nimport { FaBook, FaCalendarAlt, FaExclamationCircle, FaInfoCircle, FaArrowRight, FaUser, FaCheck, FaExchangeAlt } from \"react-icons/fa\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserLoans = () => {\n  _s();\n  const [loans, setLoans] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [returnLoading, setReturnLoading] = useState(null);\n  const {\n    currentUser\n  } = useAuth();\n  useEffect(() => {\n    const fetchUserLoans = async () => {\n      try {\n        // Đảm bảo currentUser và currentUser._id tồn tại\n        if (!currentUser || !currentUser._id) {\n          throw new Error(\"Thông tin người dùng không khả dụng\");\n        }\n        const res = await axios.get(`http://localhost:9999/users/${currentUser._id}/loans`);\n\n        // Thêm các dòng này để kiểm tra dữ liệu\n        console.log(\"Toàn bộ dữ liệu loans:\", res.data);\n        if (res.data && res.data.length > 0) {\n          console.log(\"Chi tiết loan đầu tiên:\", JSON.stringify(res.data[0], null, 2));\n          console.log(\"Thông tin user trong loan:\", res.data[0].user);\n        }\n        setLoans(res.data);\n      } catch (err) {\n        setError(\"Không thể tải danh sách sách đã mượn. Vui lòng thử lại sau.\");\n        console.error(\"Error fetching loans:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (currentUser) {\n      fetchUserLoans();\n    } else {\n      setLoading(false);\n      setError(\"Vui lòng đăng nhập để xem sách đã mượn\");\n    }\n  }, [currentUser]);\n  const formatDate = dateString => {\n    if (!dateString) return \"N/A\";\n    const options = {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\"\n    };\n    return new Date(dateString).toLocaleDateString(\"vi-VN\", options);\n  };\n  const getLoanStatus = loan => {\n    if (!loan) return null;\n    if (loan.status === \"returned\") {\n      return /*#__PURE__*/_jsxDEV(Badge, {\n        bg: \"success\",\n        children: \"\\u0110\\xE3 tr\\u1EA3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 14\n      }, this);\n    } else if (loan.isOverdue) {\n      return /*#__PURE__*/_jsxDEV(Badge, {\n        bg: \"danger\",\n        children: \"Qu\\xE1 h\\u1EA1n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Badge, {\n        bg: \"primary\",\n        children: \"\\u0110ang m\\u01B0\\u1EE3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 14\n      }, this);\n    }\n  };\n  const handleReturnBook = async loanId => {\n    if (window.confirm(\"Bạn có chắc chắn muốn đánh dấu sách này đã được trả?\")) {\n      setReturnLoading(loanId);\n      try {\n        await axios.put(`http://localhost:9999/loans/update/${loanId}`, {\n          status: \"returned\"\n        });\n\n        // Cập nhật danh sách mượn\n        setLoans(loans.map(loan => loan.id === loanId ? {\n          ...loan,\n          status: \"returned\",\n          returnDate: new Date().toISOString()\n        } : loan));\n      } catch (err) {\n        alert(\"Không thể cập nhật trạng thái. Vui lòng thử lại.\");\n        console.error(err);\n      } finally {\n        setReturnLoading(null);\n      }\n    }\n  };\n\n  // Hiển thị thông tin người dùng an toàn\n  const renderUserInfo = loan => {\n    // Kiểm tra xem loan và loan.user có tồn tại không\n    if (!loan || !loan.user) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-muted small\",\n        children: [/*#__PURE__*/_jsxDEV(FaUser, {\n          className: \"me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), \"Kh\\xF4ng c\\xF3 th\\xF4ng tin ng\\u01B0\\u1EDDi d\\xF9ng\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex align-items-center\",\n      children: [/*#__PURE__*/_jsxDEV(FaUser, {\n        className: \"text-primary me-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"fw-bold mb-0\",\n          children: loan.user.username || \"Không có tên\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted mb-0 small\",\n          children: loan.user.email || \"Không có email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"d-flex justify-content-center align-items-center\",\n      style: {\n        minHeight: \"300px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        variant: \"primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"py-4\",\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        children: [/*#__PURE__*/_jsxDEV(FaExclamationCircle, {\n          className: \"me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), \" \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"py-4\",\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      className: \"shadow-sm\",\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(FaBook, {\n            className: \"me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), \"S\\xE1ch \\u0111\\xE3 m\\u01B0\\u1EE3n\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), !loans || loans.length === 0 ? /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"warning\",\n          children: [/*#__PURE__*/_jsxDEV(FaInfoCircle, {\n            className: \"me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 15\n          }, this), \"B\\u1EA1n ch\\u01B0a m\\u01B0\\u1EE3n s\\xE1ch n\\xE0o.\", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              as: Link,\n              to: \"/home\",\n              variant: \"outline-primary\",\n              size: \"sm\",\n              children: \"Xem danh s\\xE1ch s\\xE1ch\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-responsive\",\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            striped: true,\n            hover: true,\n            bordered: true,\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"S\\xE1ch\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Ng\\u01B0\\u1EDDi m\\u01B0\\u1EE3n\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Ng\\xE0y m\\u01B0\\u1EE3n\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"H\\u1EA1n tr\\u1EA3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Tr\\u1EA1ng th\\xE1i\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: loans.map(loan => {\n                var _loan$book, _loan$book2, _loan$book2$author;\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"fw-bold mb-1\",\n                        children: (loan === null || loan === void 0 ? void 0 : (_loan$book = loan.book) === null || _loan$book === void 0 ? void 0 : _loan$book.title) || \"Không có tiêu đề\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 211,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-muted mb-0 small\",\n                        children: (loan === null || loan === void 0 ? void 0 : (_loan$book2 = loan.book) === null || _loan$book2 === void 0 ? void 0 : (_loan$book2$author = _loan$book2.author) === null || _loan$book2$author === void 0 ? void 0 : _loan$book2$author.name) || \"Chưa có tác giả\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 214,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 210,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: renderUserInfo(loan)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [/*#__PURE__*/_jsxDEV(FaCalendarAlt, {\n                      className: \"text-muted me-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 221,\n                      columnNumber: 25\n                    }, this), formatDate(loan === null || loan === void 0 ? void 0 : loan.loanDate)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: loan !== null && loan !== void 0 && loan.isOverdue && (loan === null || loan === void 0 ? void 0 : loan.status) !== \"returned\" ? \"text-danger fw-bold\" : \"\",\n                      children: formatDate(loan === null || loan === void 0 ? void 0 : loan.dueDate)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 225,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-center\",\n                    children: getLoanStatus(loan)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 23\n                  }, this)]\n                }, (loan === null || loan === void 0 ? void 0 : loan.id) || Math.random(), true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 171,\n    columnNumber: 5\n  }, this);\n};\n_s(UserLoans, \"bfgsf67v1FB0F8zlvacFJRzIMJM=\", false, function () {\n  return [useAuth];\n});\n_c = UserLoans;\nexport default UserLoans;\nvar _c;\n$RefreshReg$(_c, \"UserLoans\");","map":{"version":3,"names":["React","useState","useEffect","axios","useAuth","Link","Container","Row","Col","Table","Badge","Button","Spinner","Alert","Card","FaBook","FaCalendarAlt","FaExclamationCircle","FaInfoCircle","FaArrowRight","FaUser","FaCheck","FaExchangeAlt","jsxDEV","_jsxDEV","UserLoans","_s","loans","setLoans","loading","setLoading","error","setError","returnLoading","setReturnLoading","currentUser","fetchUserLoans","_id","Error","res","get","console","log","data","length","JSON","stringify","user","err","formatDate","dateString","options","year","month","day","Date","toLocaleDateString","getLoanStatus","loan","status","bg","children","fileName","_jsxFileName","lineNumber","columnNumber","isOverdue","handleReturnBook","loanId","window","confirm","put","map","id","returnDate","toISOString","alert","renderUserInfo","className","username","email","style","minHeight","animation","variant","Body","as","to","size","striped","hover","bordered","_loan$book","_loan$book2","_loan$book2$author","book","title","author","name","loanDate","dueDate","Math","random","_c","$RefreshReg$"],"sources":["D:/downloads/Git/BookManagement/front-end/src/components/loans/UserLoans.js"],"sourcesContent":["// src/components/loans/UserLoans.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Table,\r\n  Badge,\r\n  Button,\r\n  Spinner,\r\n  Alert,\r\n  Card,\r\n} from \"react-bootstrap\";\r\nimport {\r\n  FaBook,\r\n  FaCalendarAlt,\r\n  FaExclamationCircle,\r\n  FaInfoCircle,\r\n  FaArrowRight,\r\n  FaUser,\r\n  FaCheck,\r\n  FaExchangeAlt,\r\n} from \"react-icons/fa\";\r\n\r\nconst UserLoans = () => {\r\n  const [loans, setLoans] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const [returnLoading, setReturnLoading] = useState(null);\r\n  const { currentUser } = useAuth();\r\n\r\n  useEffect(() => {\r\n    const fetchUserLoans = async () => {\r\n      try {\r\n        // Đảm bảo currentUser và currentUser._id tồn tại\r\n        if (!currentUser || !currentUser._id) {\r\n          throw new Error(\"Thông tin người dùng không khả dụng\");\r\n        }\r\n\r\n        const res = await axios.get(\r\n          `http://localhost:9999/users/${currentUser._id}/loans`\r\n        );\r\n\r\n        // Thêm các dòng này để kiểm tra dữ liệu\r\n        console.log(\"Toàn bộ dữ liệu loans:\", res.data);\r\n\r\n        if (res.data && res.data.length > 0) {\r\n          console.log(\r\n            \"Chi tiết loan đầu tiên:\",\r\n            JSON.stringify(res.data[0], null, 2)\r\n          );\r\n          console.log(\"Thông tin user trong loan:\", res.data[0].user);\r\n        }\r\n\r\n        setLoans(res.data);\r\n      } catch (err) {\r\n        setError(\"Không thể tải danh sách sách đã mượn. Vui lòng thử lại sau.\");\r\n        console.error(\"Error fetching loans:\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (currentUser) {\r\n      fetchUserLoans();\r\n    } else {\r\n      setLoading(false);\r\n      setError(\"Vui lòng đăng nhập để xem sách đã mượn\");\r\n    }\r\n  }, [currentUser]);\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"N/A\";\r\n    const options = { year: \"numeric\", month: \"long\", day: \"numeric\" };\r\n    return new Date(dateString).toLocaleDateString(\"vi-VN\", options);\r\n  };\r\n\r\n  const getLoanStatus = (loan) => {\r\n    if (!loan) return null;\r\n\r\n    if (loan.status === \"returned\") {\r\n      return <Badge bg=\"success\">Đã trả</Badge>;\r\n    } else if (loan.isOverdue) {\r\n      return <Badge bg=\"danger\">Quá hạn</Badge>;\r\n    } else {\r\n      return <Badge bg=\"primary\">Đang mượn</Badge>;\r\n    }\r\n  };\r\n\r\n  const handleReturnBook = async (loanId) => {\r\n    if (\r\n      window.confirm(\"Bạn có chắc chắn muốn đánh dấu sách này đã được trả?\")\r\n    ) {\r\n      setReturnLoading(loanId);\r\n      try {\r\n        await axios.put(`http://localhost:9999/loans/update/${loanId}`, {\r\n          status: \"returned\",\r\n        });\r\n\r\n        // Cập nhật danh sách mượn\r\n        setLoans(\r\n          loans.map((loan) =>\r\n            loan.id === loanId\r\n              ? {\r\n                  ...loan,\r\n                  status: \"returned\",\r\n                  returnDate: new Date().toISOString(),\r\n                }\r\n              : loan\r\n          )\r\n        );\r\n      } catch (err) {\r\n        alert(\"Không thể cập nhật trạng thái. Vui lòng thử lại.\");\r\n        console.error(err);\r\n      } finally {\r\n        setReturnLoading(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Hiển thị thông tin người dùng an toàn\r\n  const renderUserInfo = (loan) => {\r\n    // Kiểm tra xem loan và loan.user có tồn tại không\r\n    if (!loan || !loan.user) {\r\n      return (\r\n        <div className=\"text-muted small\">\r\n          <FaUser className=\"me-2\" />\r\n          Không có thông tin người dùng\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"d-flex align-items-center\">\r\n        <FaUser className=\"text-primary me-2\" />\r\n        <div>\r\n          <p className=\"fw-bold mb-0\">{loan.user.username || \"Không có tên\"}</p>\r\n          <p className=\"text-muted mb-0 small\">\r\n            {loan.user.email || \"Không có email\"}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container\r\n        className=\"d-flex justify-content-center align-items-center\"\r\n        style={{ minHeight: \"300px\" }}\r\n      >\r\n        <Spinner animation=\"border\" variant=\"primary\" />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Container className=\"py-4\">\r\n        <Alert variant=\"danger\">\r\n          <FaExclamationCircle className=\"me-2\" /> {error}\r\n        </Alert>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container className=\"py-4\">\r\n      <Card className=\"shadow-sm\">\r\n        <Card.Body>\r\n          <h2 className=\"mb-4\">\r\n            <FaBook className=\"me-2\" />\r\n            Sách đã mượn\r\n          </h2>\r\n\r\n          {!loans || loans.length === 0 ? (\r\n            <Alert variant=\"warning\">\r\n              <FaInfoCircle className=\"me-2\" />\r\n              Bạn chưa mượn sách nào.\r\n              <div className=\"mt-2\">\r\n                <Button\r\n                  as={Link}\r\n                  to=\"/home\"\r\n                  variant=\"outline-primary\"\r\n                  size=\"sm\"\r\n                >\r\n                  Xem danh sách sách\r\n                </Button>\r\n              </div>\r\n            </Alert>\r\n          ) : (\r\n            <div className=\"table-responsive\">\r\n              <Table striped hover bordered>\r\n                <thead>\r\n                  <tr>\r\n                    <th>Sách</th>\r\n                    <th>Người mượn</th>\r\n                    <th>Ngày mượn</th>\r\n                    <th>Hạn trả</th>\r\n                    <th>Trạng thái</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {loans.map((loan) => (\r\n                    <tr key={loan?.id || Math.random()}>\r\n                      <td>\r\n                        <div>\r\n                          <p className=\"fw-bold mb-1\">\r\n                            {loan?.book?.title || \"Không có tiêu đề\"}\r\n                          </p>\r\n                          <p className=\"text-muted mb-0 small\">\r\n                            {loan?.book?.author?.name || \"Chưa có tác giả\"}\r\n                          </p>\r\n                        </div>\r\n                      </td>\r\n                      <td>{renderUserInfo(loan)}</td>\r\n                      <td>\r\n                        <FaCalendarAlt className=\"text-muted me-2\" />\r\n                        {formatDate(loan?.loanDate)}\r\n                      </td>\r\n                      <td>\r\n                        <span\r\n                          className={\r\n                            loan?.isOverdue && loan?.status !== \"returned\"\r\n                              ? \"text-danger fw-bold\"\r\n                              : \"\"\r\n                          }\r\n                        >\r\n                          {formatDate(loan?.dueDate)}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-center\">{getLoanStatus(loan)}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </Table>\r\n            </div>\r\n          )}\r\n        </Card.Body>\r\n      </Card>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default UserLoans;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}