{"ast":null,"code":"var _jsxFileName = \"D:\\\\downloads\\\\Git\\\\BookManagement\\\\front-end\\\\src\\\\components\\\\loans\\\\LoanDetails.js\",\n  _s = $RefreshSig$();\n// src/components/loans/LoanDetails.js\nimport React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { Container, Row, Col, Card, Badge, Button, Spinner, Alert } from \"react-bootstrap\";\nimport { FaBook, FaUser, FaCalendarAlt, FaCalendarCheck, FaCalendarPlus, FaArrowLeft, FaCheckCircle } from \"react-icons/fa\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = \"http://localhost:9999\";\nconst LoanDetails = () => {\n  _s();\n  const [loan, setLoan] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [returnLoading, setReturnLoading] = useState(false);\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    currentUser\n  } = useAuth();\n  useEffect(() => {\n    const fetchLoan = async () => {\n      try {\n        const res = await axios.get(`${API_BASE_URL}/loans/${id}`);\n        setLoan(res.data);\n      } catch (err) {\n        setError(\"Không thể tải thông tin mượn sách. Vui lòng thử lại sau.\");\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchLoan();\n  }, [id]);\n  const formatDate = dateString => {\n    if (!dateString) return \"N/A\";\n    const options = {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\"\n    };\n    return new Date(dateString).toLocaleDateString(\"vi-VN\", options);\n  };\n  const handleReturnBook = async () => {\n    if (window.confirm(\"Bạn có chắc chắn muốn đánh dấu sách này đã được trả?\")) {\n      setReturnLoading(true);\n      try {\n        const res = await axios.put(`${API_BASE_URL}/loans/update/${id}`, {\n          status: \"returned\"\n        });\n        setLoan(res.data.loan);\n      } catch (err) {\n        alert(\"Không thể cập nhật trạng thái sách. Vui lòng thử lại.\");\n        console.error(err);\n      } finally {\n        setReturnLoading(false);\n      }\n    }\n  };\n  const renderLoanStatus = () => {\n    if (!loan) return null;\n    if (loan.status === \"returned\") {\n      return /*#__PURE__*/_jsxDEV(Badge, {\n        bg: \"success\",\n        children: [/*#__PURE__*/_jsxDEV(FaCheckCircle, {\n          className: \"me-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), \" \\u0110\\xE3 tr\\u1EA3\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this);\n    } else if (loan.isOverdue) {\n      return /*#__PURE__*/_jsxDEV(Badge, {\n        bg: \"danger\",\n        children: \"Qu\\xE1 h\\u1EA1n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Badge, {\n        bg: \"primary\",\n        children: \"\\u0110ang m\\u01B0\\u1EE3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 14\n      }, this);\n    }\n  };\n  const isAdmin = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.role) === \"admin\";\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"d-flex justify-content-center align-items-center\",\n      style: {\n        minHeight: \"300px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        variant: \"primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this);\n  }\n  if (error || !loan) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"py-4\",\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        children: error || \"Không tìm thấy thông tin mượn sách\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: () => navigate(\"/loans\"),\n        children: [/*#__PURE__*/_jsxDEV(FaArrowLeft, {\n          className: \"me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), \"Quay l\\u1EA1i danh s\\xE1ch m\\u01B0\\u1EE3n\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Kiểm tra quyền truy cập\n  if (!isAdmin && loan.user._id !== currentUser._id) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"py-4\",\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        children: \"B\\u1EA1n kh\\xF4ng c\\xF3 quy\\u1EC1n xem th\\xF4ng tin m\\u01B0\\u1EE3n s\\xE1ch n\\xE0y.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: () => navigate(\"/loans\"),\n        children: [/*#__PURE__*/_jsxDEV(FaArrowLeft, {\n          className: \"me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), \"Quay l\\u1EA1i danh s\\xE1ch m\\u01B0\\u1EE3n\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"py-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"mb-4\",\n      children: \"Chi ti\\u1EBFt m\\u01B0\\u1EE3n s\\xE1ch\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"shadow-sm mb-4\",\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            md: 6,\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              className: \"border-0\",\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex align-items-center mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-primary bg-opacity-10 p-3 rounded-circle me-3\",\n                    children: /*#__PURE__*/_jsxDEV(FaBook, {\n                      className: \"text-primary\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 148,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"mb-0\",\n                    children: \"Th\\xF4ng tin s\\xE1ch\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ps-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-muted small\",\n                      children: \"Ti\\xEAu \\u0111\\u1EC1:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 155,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"fw-bold\",\n                      children: loan.book.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 156,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 154,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-muted small\",\n                      children: \"T\\xE1c gi\\u1EA3:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 160,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: loan.book.author ? loan.book.author.name : \"Chưa có tác giả\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 161,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-muted small\",\n                      children: \"Th\\u1EC3 lo\\u1EA1i:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 169,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: loan.book.category ? loan.book.category.name : \"Chưa phân loại\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 170,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: 6,\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              className: \"border-0\",\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex align-items-center mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-primary bg-opacity-10 p-3 rounded-circle me-3\",\n                    children: /*#__PURE__*/_jsxDEV(FaCalendarAlt, {\n                      className: \"text-primary\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 186,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"mb-0\",\n                    children: \"Th\\xF4ng tin m\\u01B0\\u1EE3n\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 188,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ps-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-muted small\",\n                      children: \"Tr\\u1EA1ng th\\xE1i:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 193,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: renderLoanStatus()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 194,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-muted small\",\n                      children: \"Ng\\xE0y m\\u01B0\\u1EE3n:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 198,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex align-items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(FaCalendarAlt, {\n                        className: \"text-muted me-2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 200,\n                        columnNumber: 25\n                      }, this), formatDate(loan.loanDate)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 199,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-muted small\",\n                      children: \"H\\u1EA1n tr\\u1EA3:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 206,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex align-items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(FaCalendarCheck, {\n                        className: \"text-muted me-2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 208,\n                        columnNumber: 25\n                      }, this), formatDate(loan.dueDate)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 207,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 205,\n                    columnNumber: 21\n                  }, this), loan.returnDate && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-muted small\",\n                      children: \"Ng\\xE0y tr\\u1EA3:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 215,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex align-items-center text-success\",\n                      children: [/*#__PURE__*/_jsxDEV(FaCheckCircle, {\n                        className: \"me-2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 217,\n                        columnNumber: 27\n                      }, this), formatDate(loan.returnDate)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 216,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 214,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), isAdmin && /*#__PURE__*/_jsxDEV(Row, {\n          className: \"mt-4\",\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              className: \"border-0 bg-light\",\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex align-items-center mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-primary bg-opacity-10 p-3 rounded-circle me-3\",\n                    children: /*#__PURE__*/_jsxDEV(FaUser, {\n                      className: \"text-primary\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 235,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"mb-0\",\n                    children: \"Th\\xF4ng tin ng\\u01B0\\u1EDDi d\\xF9ng\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-muted small\",\n                        children: \"T\\xEAn ng\\u01B0\\u1EDDi d\\xF9ng:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 243,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"fw-bold\",\n                        children: loan.user.username\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 246,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 242,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-muted small\",\n                        children: \"Email:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 251,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: loan.user.email\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 252,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 250,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-end mt-4 gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secondary\",\n            onClick: () => navigate(isAdmin ? \"/admin/loans\" : \"/loans\"),\n            children: [/*#__PURE__*/_jsxDEV(FaArrowLeft, {\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this), \"Quay l\\u1EA1i\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this), loan.status === \"borrowed\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"success\",\n              onClick: () => navigate(`/loans/${loan.id}/extend`),\n              children: [/*#__PURE__*/_jsxDEV(FaCalendarPlus, {\n                className: \"me-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 19\n              }, this), \"Gia h\\u1EA1n\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this), isAdmin && /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: handleReturnBook,\n              disabled: returnLoading,\n              children: returnLoading ? /*#__PURE__*/_jsxDEV(Spinner, {\n                animation: \"border\",\n                size: \"sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(FaCheckCircle, {\n                  className: \"me-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 25\n                }, this), \"\\u0110\\xE1nh d\\u1EA5u \\u0111\\xE3 tr\\u1EA3\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n};\n_s(LoanDetails, \"1fh7VXdxZKt2bSFyT7msFS33Suw=\", false, function () {\n  return [useParams, useNavigate, useAuth];\n});\n_c = LoanDetails;\nexport default LoanDetails;\nvar _c;\n$RefreshReg$(_c, \"LoanDetails\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","useAuth","Container","Row","Col","Card","Badge","Button","Spinner","Alert","FaBook","FaUser","FaCalendarAlt","FaCalendarCheck","FaCalendarPlus","FaArrowLeft","FaCheckCircle","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE_URL","LoanDetails","_s","loan","setLoan","loading","setLoading","error","setError","returnLoading","setReturnLoading","id","navigate","currentUser","fetchLoan","res","get","data","err","console","formatDate","dateString","options","year","month","day","Date","toLocaleDateString","handleReturnBook","window","confirm","put","status","alert","renderLoanStatus","bg","children","className","fileName","_jsxFileName","lineNumber","columnNumber","isOverdue","isAdmin","role","style","minHeight","animation","variant","onClick","user","_id","Body","md","book","title","author","name","category","loanDate","dueDate","returnDate","username","email","disabled","size","_c","$RefreshReg$"],"sources":["D:/downloads/Git/BookManagement/front-end/src/components/loans/LoanDetails.js"],"sourcesContent":["// src/components/loans/LoanDetails.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\nimport {\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Badge,\r\n  Button,\r\n  Spinner,\r\n  Alert,\r\n} from \"react-bootstrap\";\r\nimport {\r\n  FaBook,\r\n  FaUser,\r\n  FaCalendarAlt,\r\n  FaCalendarCheck,\r\n  FaCalendarPlus,\r\n  FaArrowLeft,\r\n  FaCheckCircle,\r\n} from \"react-icons/fa\";\r\n\r\nconst API_BASE_URL = \"http://localhost:9999\";\r\n\r\nconst LoanDetails = () => {\r\n  const [loan, setLoan] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const [returnLoading, setReturnLoading] = useState(false);\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { currentUser } = useAuth();\r\n\r\n  useEffect(() => {\r\n    const fetchLoan = async () => {\r\n      try {\r\n        const res = await axios.get(`${API_BASE_URL}/loans/${id}`);\r\n        setLoan(res.data);\r\n      } catch (err) {\r\n        setError(\"Không thể tải thông tin mượn sách. Vui lòng thử lại sau.\");\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchLoan();\r\n  }, [id]);\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"N/A\";\r\n    const options = { year: \"numeric\", month: \"long\", day: \"numeric\" };\r\n    return new Date(dateString).toLocaleDateString(\"vi-VN\", options);\r\n  };\r\n\r\n  const handleReturnBook = async () => {\r\n    if (\r\n      window.confirm(\"Bạn có chắc chắn muốn đánh dấu sách này đã được trả?\")\r\n    ) {\r\n      setReturnLoading(true);\r\n      try {\r\n        const res = await axios.put(`${API_BASE_URL}/loans/update/${id}`, {\r\n          status: \"returned\",\r\n        });\r\n        setLoan(res.data.loan);\r\n      } catch (err) {\r\n        alert(\"Không thể cập nhật trạng thái sách. Vui lòng thử lại.\");\r\n        console.error(err);\r\n      } finally {\r\n        setReturnLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const renderLoanStatus = () => {\r\n    if (!loan) return null;\r\n\r\n    if (loan.status === \"returned\") {\r\n      return (\r\n        <Badge bg=\"success\">\r\n          <FaCheckCircle className=\"me-1\" /> Đã trả\r\n        </Badge>\r\n      );\r\n    } else if (loan.isOverdue) {\r\n      return <Badge bg=\"danger\">Quá hạn</Badge>;\r\n    } else {\r\n      return <Badge bg=\"primary\">Đang mượn</Badge>;\r\n    }\r\n  };\r\n\r\n  const isAdmin = currentUser?.role === \"admin\";\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container\r\n        className=\"d-flex justify-content-center align-items-center\"\r\n        style={{ minHeight: \"300px\" }}\r\n      >\r\n        <Spinner animation=\"border\" variant=\"primary\" />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (error || !loan) {\r\n    return (\r\n      <Container className=\"py-4\">\r\n        <Alert variant=\"danger\">\r\n          {error || \"Không tìm thấy thông tin mượn sách\"}\r\n        </Alert>\r\n        <Button variant=\"primary\" onClick={() => navigate(\"/loans\")}>\r\n          <FaArrowLeft className=\"me-2\" />\r\n          Quay lại danh sách mượn\r\n        </Button>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  // Kiểm tra quyền truy cập\r\n  if (!isAdmin && loan.user._id !== currentUser._id) {\r\n    return (\r\n      <Container className=\"py-4\">\r\n        <Alert variant=\"danger\">\r\n          Bạn không có quyền xem thông tin mượn sách này.\r\n        </Alert>\r\n        <Button variant=\"primary\" onClick={() => navigate(\"/loans\")}>\r\n          <FaArrowLeft className=\"me-2\" />\r\n          Quay lại danh sách mượn\r\n        </Button>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container className=\"py-4\">\r\n      <h2 className=\"mb-4\">Chi tiết mượn sách</h2>\r\n\r\n      <Card className=\"shadow-sm mb-4\">\r\n        <Card.Body>\r\n          <Row>\r\n            <Col md={6}>\r\n              <Card className=\"border-0\">\r\n                <Card.Body>\r\n                  <div className=\"d-flex align-items-center mb-3\">\r\n                    <div className=\"bg-primary bg-opacity-10 p-3 rounded-circle me-3\">\r\n                      <FaBook className=\"text-primary\" />\r\n                    </div>\r\n                    <h5 className=\"mb-0\">Thông tin sách</h5>\r\n                  </div>\r\n\r\n                  <div className=\"ps-2\">\r\n                    <div className=\"mb-3\">\r\n                      <div className=\"text-muted small\">Tiêu đề:</div>\r\n                      <div className=\"fw-bold\">{loan.book.title}</div>\r\n                    </div>\r\n\r\n                    <div className=\"mb-3\">\r\n                      <div className=\"text-muted small\">Tác giả:</div>\r\n                      <div>\r\n                        {loan.book.author\r\n                          ? loan.book.author.name\r\n                          : \"Chưa có tác giả\"}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"mb-3\">\r\n                      <div className=\"text-muted small\">Thể loại:</div>\r\n                      <div>\r\n                        {loan.book.category\r\n                          ? loan.book.category.name\r\n                          : \"Chưa phân loại\"}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n\r\n            <Col md={6}>\r\n              <Card className=\"border-0\">\r\n                <Card.Body>\r\n                  <div className=\"d-flex align-items-center mb-3\">\r\n                    <div className=\"bg-primary bg-opacity-10 p-3 rounded-circle me-3\">\r\n                      <FaCalendarAlt className=\"text-primary\" />\r\n                    </div>\r\n                    <h5 className=\"mb-0\">Thông tin mượn</h5>\r\n                  </div>\r\n\r\n                  <div className=\"ps-2\">\r\n                    <div className=\"mb-3\">\r\n                      <div className=\"text-muted small\">Trạng thái:</div>\r\n                      <div>{renderLoanStatus()}</div>\r\n                    </div>\r\n\r\n                    <div className=\"mb-3\">\r\n                      <div className=\"text-muted small\">Ngày mượn:</div>\r\n                      <div className=\"d-flex align-items-center\">\r\n                        <FaCalendarAlt className=\"text-muted me-2\" />\r\n                        {formatDate(loan.loanDate)}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"mb-3\">\r\n                      <div className=\"text-muted small\">Hạn trả:</div>\r\n                      <div className=\"d-flex align-items-center\">\r\n                        <FaCalendarCheck className=\"text-muted me-2\" />\r\n                        {formatDate(loan.dueDate)}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {loan.returnDate && (\r\n                      <div className=\"mb-3\">\r\n                        <div className=\"text-muted small\">Ngày trả:</div>\r\n                        <div className=\"d-flex align-items-center text-success\">\r\n                          <FaCheckCircle className=\"me-2\" />\r\n                          {formatDate(loan.returnDate)}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n\r\n          {isAdmin && (\r\n            <Row className=\"mt-4\">\r\n              <Col>\r\n                <Card className=\"border-0 bg-light\">\r\n                  <Card.Body>\r\n                    <div className=\"d-flex align-items-center mb-3\">\r\n                      <div className=\"bg-primary bg-opacity-10 p-3 rounded-circle me-3\">\r\n                        <FaUser className=\"text-primary\" />\r\n                      </div>\r\n                      <h5 className=\"mb-0\">Thông tin người dùng</h5>\r\n                    </div>\r\n\r\n                    <Row>\r\n                      <Col md={6}>\r\n                        <div className=\"mb-3\">\r\n                          <div className=\"text-muted small\">\r\n                            Tên người dùng:\r\n                          </div>\r\n                          <div className=\"fw-bold\">{loan.user.username}</div>\r\n                        </div>\r\n                      </Col>\r\n                      <Col md={6}>\r\n                        <div className=\"mb-3\">\r\n                          <div className=\"text-muted small\">Email:</div>\r\n                          <div>{loan.user.email}</div>\r\n                        </div>\r\n                      </Col>\r\n                    </Row>\r\n                  </Card.Body>\r\n                </Card>\r\n              </Col>\r\n            </Row>\r\n          )}\r\n\r\n          <div className=\"d-flex justify-content-end mt-4 gap-2\">\r\n            <Button\r\n              variant=\"secondary\"\r\n              onClick={() => navigate(isAdmin ? \"/admin/loans\" : \"/loans\")}\r\n            >\r\n              <FaArrowLeft className=\"me-2\" />\r\n              Quay lại\r\n            </Button>\r\n\r\n            {loan.status === \"borrowed\" && (\r\n              <>\r\n                <Button\r\n                  variant=\"success\"\r\n                  onClick={() => navigate(`/loans/${loan.id}/extend`)}\r\n                >\r\n                  <FaCalendarPlus className=\"me-2\" />\r\n                  Gia hạn\r\n                </Button>\r\n\r\n                {isAdmin && (\r\n                  <Button\r\n                    variant=\"primary\"\r\n                    onClick={handleReturnBook}\r\n                    disabled={returnLoading}\r\n                  >\r\n                    {returnLoading ? (\r\n                      <Spinner animation=\"border\" size=\"sm\" />\r\n                    ) : (\r\n                      <>\r\n                        <FaCheckCircle className=\"me-2\" />\r\n                        Đánh dấu đã trả\r\n                      </>\r\n                    )}\r\n                  </Button>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n        </Card.Body>\r\n      </Card>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default LoanDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}